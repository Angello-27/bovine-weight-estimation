# ============================================================
# Backend FastAPI - Sistema de Estimación de Peso Bovino
# Python 3.11+
# Hacienda Gamelera - Bruno Brito Macedo
# ============================================================

# ===== Framework Web =====
fastapi==0.104.1
uvicorn[standard]==0.24.0
python-multipart==0.0.6

# ===== Database (MongoDB) =====
motor==3.3.2       # MongoDB async driver
pymongo==4.6.0     # MongoDB sync driver (para scripts)
beanie==1.23.6     # ODM para MongoDB (Pydantic v2 compatible)

# ===== Validación y Serialización =====
pydantic==2.5.0
pydantic-settings==2.1.0  # Settings desde .env
email-validator==2.1.0

# ===== Autenticación y Seguridad =====
python-jose[cryptography]==3.3.0
passlib[bcrypt]==1.7.4
bcrypt<5.0.0  # Compatible con passlib 1.7.4 (bcrypt 5.0+ requiere passlib más reciente)
types-passlib==1.7.7.20250602  # Stubs de tipos para passlib
python-dotenv==1.0.0

# ===== Machine Learning =====
# TensorFlow para cargar modelos TFLite
# En producción (Linux), usar TensorFlow completo
# En desarrollo (macOS), puede requerir instalación manual
tensorflow>=2.16.1,<2.17.0  # Para cargar modelos TFLite (requerido para producción)
# Alternativa ligera (solo Linux): tensorflow-lite-runtime==2.16.0
pillow==10.1.0      # Procesamiento de imágenes
numpy==1.26.2       # Operaciones numéricas
opencv-python==4.8.1.78  # Procesamiento de imágenes (YOLO)
ultralytics==8.0.196  # YOLOv8 para detección de ganado
scipy==1.11.4       # Optimización para calibración
requests==2.31.0    # HTTP requests para APIs de generación
gdown==4.7.1        # Descarga de archivos desde Google Drive (para modelos TFLite)

# ===== ML Training Dependencies =====
mlflow==2.8.1       # Experiment tracking
albumentations==1.3.1  # Data augmentation
matplotlib==3.8.2   # Visualización
seaborn==0.13.0     # Visualización estadística
pandas==2.1.4       # Manipulación de datos
scikit-learn==1.3.2  # Métricas y evaluación

# ===== Strategy Pattern Dependencies =====
# Las estrategias usan las dependencias ML existentes
# No se requieren dependencias adicionales para el patrón Strategy

# ===== Utilidades =====
python-dateutil==2.8.2
pytz==2023.3

# ===== Logging y Monitoreo =====
python-json-logger==2.0.7
loguru==0.7.2       # Logging estructurado

# ===== Reportes =====
reportlab==4.0.7    # Generación de PDFs con diseño profesional
openpyxl==3.1.2     # Generación de Excel con estilos avanzados
# Nota: reportlab requiere Pillow (ya incluido en ML dependencies)
# Nota: openpyxl no requiere dependencias adicionales

# ===== Utilidades HTTP =====
httpx==0.25.2       # HTTP client async

# ===== Testing (Dev) =====
pytest==7.4.3
pytest-asyncio==0.21.1
pytest-cov==4.1.0

# ===== Code Quality (Dev) =====
black==23.11.0      # Formatter
flake8==6.1.0       # Linter
mypy==1.7.1         # Type checker
isort==5.12.0       # Import sorter
ruff==0.1.6         # Fast linter/formatter alternativo

